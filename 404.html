<html>
    <head>
        <title>
            Techsta.Link
        </title>
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <link rel="stylesheet" type="text/css" href="main.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>



        <link href="https://fonts.googleapis.com/css2?family=Sometype+Mono:wght@500&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class="container">
        <div class="login fade-in">
            <div id="totalDIV">
            <div class="logo"><img src='logo.png'></div>
            <h2>Techsta.Link</h2>
            <h5>Shorten any URL, for free</h5>
           <br>
           <h3>We are currently Redirection You To Your Destination Page</h3>
           <br>
           <h5>This may take a few seconds...</h5>
        </div>
              
              
                    
        </div>
    </div>
        <script>
            const firebaseConfig = {
    apiKey: "AIzaSyBLUOrxSKOMUeiLDIY0dTBihkNixehRfdc",
    authDomain: "techstalink.firebaseapp.com",
    projectId: "techstalink",
    storageBucket: "techstalink.appspot.com",
    messagingSenderId: "82134761757",
    appId: "1:82134761757:web:fbad1cf81ff00e45d861f4"
  };
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database()
  let originalgoto = window.location.pathname;
  let goto = window.location.pathname;
  goto = goto.replace('/', '')
  const check = goto.charAt(goto.length - 1);
  if(check == '+'){
    newGoto = goto.replace('+', '')
    const variableRef = database.ref('/'+newGoto);
    
    variableRef.once('value')
  .then(snapshot => {
    if (snapshot.exists()) {
      const data = snapshot.val();
        const toforwardto = data.url;
        const domain = data.domain;
        originalgoto = originalgoto.replace('/', '')
        originalgoto = originalgoto.replace('+', '')
        document.getElementById('totalDIV').innerHTML= `<div class="logo"><img src='logo.png'></div>
            <h2>Techsta.Link</h2>
            <h5>Shorten any URL, for free</h5>
           <hr>
           <h5>The Techsta.link with the shortener "${originalgoto}" will redirect to:</h5>
           <br>
           <h1>${toforwardto}</h1>
           <hr>
           <a class="btn btn-outline-danger" type='submit' href="${toforwardto}">Proceed</a>
           <br>
           <br>
           <p>Or</p>
           <a class="btn btn-outline-primary" type='submit' href="index.html">Create Your Own</a>`
                    $(document).ready(function () {
                $(".login").addClass("loaded");
            });
        
    } else {
        console.log('cannot find techsta.link')
        document.getElementById('totalDIV').innerHTML= `<div class="logo"><img src='logo.png'></div>
            <h2>Techsta.Link</h2>
            <h5>Shorten any URL, for free</h5>
           <br>
           <h1>Sorry,</h1>
           <br>
           <h5>We can not locate your techsta.link. This can be because of a wrong shortener, or an error on our end.</h5>
           <hr>
           <a class="btn btn-outline-primary" type='submit' href="index.html">Create Your Own</a>`
                    $(document).ready(function () {
                $(".login").addClass("loaded");
            });
           return
    }
  })
  .catch(error => {
    console.log(error)
    document.getElementById('totalDIV').innerHTML = `<div class="logo"><img src='logo.png'></div>
            <h2>Techsta.Link</h2>
            <h5>Shorten any URL, for free</h5>
           <br>
           <h1>Sorry,</h1>
           <br>
           <h5>We can not locate your techsta.link. This can be because of a wrong shortener, or an error on our end.</h5>
           <hr>
           <a class="btn btn-outline-primary" type='submit' href="index.html">Create Your Own</a>`;
                  $(document).ready(function () {
                $(".login").addClass("loaded");
            });
  });
  }else{
  const variableRef = database.ref('/'+goto);
  
  variableRef.once('value')
  .then(snapshot => {
    if (snapshot.exists()) {
      const data = snapshot.val();
        const toforwardto = data.url;
        const domain = data.domain;
        if(domain !='techsta.link'){
            console.log('wrong domain')
            document.getElementById('totalDIV').innerHTML= `<div class="logo"><img src='logo.png'></div>
            <h2>Techsta.Link</h2>
            <h5>Shorten any URL, for free</h5>
           <br>
           <h1>Sorry,</h1>
           <br>
           <h5>We can not locate your techsta.link. This can be because of a wrong shortener, or an error on our end.</h5>
           <hr>
           <a class="btn btn-outline-primary" type='submit' href="index.html">Create Your Own</a>`
                        $(document).ready(function () {
                $(".login").addClass("loaded");
            });
           return
        }
        
        window.location.href = toforwardto
    } else {
        console.log('cannot find')
        document.getElementById('totalDIV').innerHTML= `<div class="logo"><img src='logo.png'></div>
            <h2>Techsta.Link</h2>
            <h5>Shorten any URL, for free</h5>
           <br>
           <h1>Sorry,</h1>
           <br>
           <h5>We can not locate your techsta.link. This can be because of a wrong shortener, or an error on our end.</h5>
           <hr>
           <a class="btn btn-outline-primary" type='submit' href="index.html">Create Your Own</a>`
                    $(document).ready(function () {
                $(".login").addClass("loaded");
            });
           return
    }
  })
  .catch(error => {
    console.log(error)
    document.getElementById('totalDIV').innerHTML = `<div class="logo"><img src='logo.png'></div>
            <h2>Techsta.Link</h2>
            <h5>Shorten any URL, for free</h5>
           <br>
           <h1>Sorry,</h1>
           <br>
           <h5>We can not locate your techsta.link. This can be because of a wrong shortener, or an error on our end.</h5>
           <hr>
           <a class="btn btn-outline-primary" type='submit' href="index.html">Create Your Own</a>`;
                  $(document).ready(function () {
                $(".login").addClass("loaded");
            });
  });
  }
        </script>
        <script>
    </body>
</html>
